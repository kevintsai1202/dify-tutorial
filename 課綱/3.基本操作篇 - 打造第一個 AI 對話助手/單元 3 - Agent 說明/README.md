# å–®å…ƒ 3 - Agent èªªæ˜

![å°é¢](cover.png)

> ğŸ• é ä¼°æ™‚é•·ï¼š20 åˆ†é˜

## å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬å–®å…ƒå¾Œï¼Œæ‚¨å°‡èƒ½å¤ ï¼š
- ç†è§£ AI Agent èˆ‡ä¸€èˆ¬ Chatbot çš„æ ¸å¿ƒå·®ç•°
- æŒæ¡ Function Calling èˆ‡ ReAct å…©ç¨®æ¨¡å¼çš„å€åˆ¥
- å­¸æœƒè¨­å®š Agent çš„æœ€å¤§è¿­ä»£æ¬¡æ•¸ (Max Iterations) ä»¥é¿å…ç„¡é™è¿´åœˆ
- äº†è§£ä¸åŒæ¨¡å‹ (OpenAI vs Claude) åœ¨ Tool Calling èƒ½åŠ›ä¸Šçš„è¡¨ç¾

## å…§å®¹å¤§ç¶±

### 1. ä»€éº¼æ˜¯ Agentï¼Ÿ

**Agent (æ™ºèƒ½é«”)** èˆ‡å‚³çµ± Chatbot æœ€å¤§çš„ä¸åŒåœ¨æ–¼ï¼š
- **Chatbot**ï¼šåªæœƒèªªè©±ã€‚
- **Agent**ï¼šæœƒæ€è€ƒã€è¦åŠƒï¼Œä¸¦ä½¿ç”¨ **å·¥å…· (Tools)** ä¾†é”æˆç›®æ¨™ã€‚

ç°¡å–®å…¬å¼ï¼š**Agent = LLM (å¤§è…¦) + Tools (æ‰‹è…³) + Planning (è¦åŠƒ)**

### 2. æ¨¡å‹é¸æ“‡èˆ‡æ¨¡å¼

#### ğŸ§  æ¨¡å‹é¸æ“‡
ä¸¦éæ‰€æœ‰æ¨¡å‹éƒ½é©åˆç”¨ä¾†åš Agentã€‚ç›®å‰æœ€å¼·å¤§çš„å…©å€‹é¸æ“‡æ˜¯ï¼š
- **OpenAI (GPT-4 ç³»åˆ—)**
- **Anthropic (Claude 3 ç³»åˆ—)**

é€™å…©å®¶æ¨¡å‹åœ¨ç†è§£ã€Œä½•æ™‚è©²å‘¼å«å·¥å…·ã€ä»¥åŠã€Œå¦‚ä½•æº–ç¢ºä»£å…¥åƒæ•¸ã€çš„èƒ½åŠ›ä¸Šé å„ªæ–¼å…¶ä»–é–‹æºæ¨¡å‹ã€‚

#### âš™ï¸ Function Calling vs ReAct
- **Function Calling**ï¼š
    - æ¨¡å‹åŸå¤§æ”¯æ´çš„æ¨¡å¼ã€‚
    - æº–ç¢ºç‡é«˜ï¼ŒToken æ¶ˆè€—è¼ƒå°‘ã€‚
    - Dify æœƒå„ªå…ˆä½¿ç”¨æ­¤æ¨¡å¼ï¼ˆè‹¥æ¨¡å‹æ”¯æ´ï¼‰ã€‚
- **ReAct (Reason + Act)**ï¼š
    - ä¸€ç¨®æç¤ºè©å·¥ç¨‹ (Prompt Engineering) æŠ€å·§ã€‚
    - å¼·åˆ¶æ¨¡å‹é€²è¡Œã€Œæ€è€ƒ -> è¡Œå‹• -> è§€å¯Ÿã€çš„å¾ªç’°ã€‚
    - é©ç”¨æ–¼ä¸æ”¯æ´ Function Calling çš„æ¨¡å‹ï¼Œä½†é€Ÿåº¦è¼ƒæ…¢ä¸”è¼ƒè€— Tokenã€‚

### 3. Agent çš„é‡è¦è¨­å®š

#### ğŸ”„ æœ€å¤§è¿­ä»£æ¬¡æ•¸ (Max Iterations)
- **å®šç¾©**ï¼šAgent ç‚ºäº†å›ç­”ä¸€å€‹å•é¡Œï¼Œæœ€å¤šå¯ä»¥é€£çºŒä½¿ç”¨å·¥å…·å¹¾æ¬¡ã€‚
- **å»ºè­°å€¼**ï¼š**5 ~ 10** (èª²ç¨‹ä¸­ç¤ºç¯„ç‚º 30ï¼Œä½†åœ¨ç”Ÿç”¢ç’°å¢ƒå»ºè­°è¨­ä½ä¸€é»)ã€‚
- **ç‚ºä»€éº¼è¦è¨­é™åˆ¶ï¼Ÿ**
    - é¿å…æ¨¡å‹é™·å…¥ã€Œæ­»è¿´åœˆã€ (ç„¡é™ Loop)ã€‚
    - æ§åˆ¶ Token æˆæœ¬ï¼Œé¿å…å› ç‚ºéŒ¯èª¤åˆ¤æ–·è€Œç”¢ç”Ÿå¤§é‡è²»ç”¨ã€‚

#### ğŸ“ æç¤ºè© (System Prompt)
- é›–ç„¶ Agent å¾ˆè°æ˜ï¼Œä½†æˆ‘å€‘é‚„æ˜¯è¦åœ¨ System Prompt ä¸­çµ¦äºˆæ˜ç¢ºæŒ‡ä»¤ã€‚
- **ç¯„ä¾‹**ï¼šã€Œä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„åŠ©ç†ï¼Œè«‹ä¸€å¾‹ä½¿ç”¨ç¹é«”ä¸­æ–‡å›ç­”ã€‚é‡åˆ°æ™‚é–“ç›¸é—œå•é¡Œï¼Œè«‹å„ªå…ˆä½¿ç”¨ `Current Time` å·¥å…·ã€‚ã€

### 4. å¯¦æˆ°æ¼”ç·´ï¼šç‚ºä»€éº¼éœ€è¦å·¥å…·ï¼Ÿ

åœ¨å½±ç‰‡ä¸­æˆ‘å€‘æ¼”ç¤ºäº†å¹¾å€‹ç¶“å…¸æ¡ˆä¾‹ï¼š
- **è©¢å•æ¨¡å‹ã€Œä»Šå¤©æ˜¯å¹¾è™Ÿï¼Ÿã€** -> æ¨¡å‹å›ç­”éŒ¯èª¤æˆ–ç„¡æ³•å›ç­” -> **è§£æ±ºæ–¹æ¡ˆ**ï¼šåŠ ä¸Š `Current Time` å·¥å…·ã€‚
- **è©¢å•æ¨¡å‹ã€Œæœ€è¿‘ä¸€é€±çš„åœ‹éš›å¤§äº‹ï¼Ÿã€** -> æ¨¡å‹å› ç‚ºçŸ¥è­˜æˆªæ­¢ç„¡æ³•å›ç­” -> **è§£æ±ºæ–¹æ¡ˆ**ï¼šåŠ ä¸Š `Exa Search` è¯ç¶²å·¥å…·ã€‚

---

## ğŸ“ èª²å¾Œå°æ¸¬é©—

> [!QUIZ]
> **Q: åœ¨ Dify ä¸­ï¼Œå“ªä¸€ç¨® Agent æ¨¡å¼é€šå¸¸æ•ˆèƒ½æ›´å¥½ã€ä¸”æ¶ˆè€—è¼ƒå°‘ Tokenï¼Ÿ**
> - [ ] ReAct
> - [x] Function Calling
> - [ ] Random Guessing

> [!QUIZ]
> **Q: å¦‚æœä¸è¨­å®šã€Œæœ€å¤§è¿­ä»£æ¬¡æ•¸ (Max Iterations)ã€ï¼Œå¯èƒ½æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ**
> - [ ] æ¨¡å‹æœƒè®Šç¬¨
> - [x] æ¨¡å‹å¯èƒ½æœƒé™·å…¥ç„¡é™è¿´åœˆï¼Œå°è‡´ Token è²»ç”¨æš´å¢
> - [ ] æ¨¡å‹æœƒè‡ªå‹•é—œæ©Ÿ

> [!QUIZ]
> **Q: ç•¶æ¨¡å‹ç„¡æ³•å›ç­”ã€Œä»Šå¤©çš„æ—¥æœŸã€æ™‚ï¼Œæˆ‘å€‘æ‡‰è©²åŠ ä¸Šå“ªå€‹å·¥å…·ï¼Ÿ**
> - [ ] Calculator (è¨ˆç®—æ©Ÿ)
> - [ ] Wikipedia Search
> - [x] Current Time (ç›®å‰æ™‚é–“)
