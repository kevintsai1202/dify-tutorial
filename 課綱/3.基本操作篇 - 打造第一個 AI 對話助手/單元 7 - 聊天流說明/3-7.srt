1
00:00:00,000 --> 00:00:02,879
我們接下來要說明聊天流的部分

2
00:00:02,879 --> 00:00:05,079
聊天流其實跟工作流

3
00:00:05,079 --> 00:00:07,280
大部分的功能是相同的

4
00:00:07,280 --> 00:00:10,519
它所有一些地方有比較不一樣的差異

5
00:00:10,519 --> 00:00:12,279
我們先建立起來看一下

6
00:00:12,279 --> 00:00:14,640
首先在這個聊天流裡面

7
00:00:14,640 --> 00:00:17,480
它基本上一定要有一個回覆

8
00:00:17,480 --> 00:00:19,359
所以你如果沒有回覆

9
00:00:19,359 --> 00:00:20,879
它會直接出現錯誤

10
00:00:20,879 --> 00:00:23,559
我們直接先把它刪除掉

11
00:00:23,559 --> 00:00:25,559
所以你看我把回覆刪掉之後

12
00:00:25,559 --> 00:00:27,679
它上面馬上會出現問題點

13
00:00:27,679 --> 00:00:30,320
接著我再把它加回來

14
00:00:30,320 --> 00:00:32,960
你看它這邊回復要有內容

15
00:00:32,960 --> 00:00:34,200
所以是空的

16
00:00:34,200 --> 00:00:36,560
所以我一定要在這邊再去加上

17
00:00:36,560 --> 00:00:39,280
比如說我要加上大語言模型的回復

18
00:00:39,280 --> 00:00:40,240
這樣子

19
00:00:40,240 --> 00:00:41,600
它才會正常

20
00:00:41,600 --> 00:00:44,000
OK 這樣子我才可以去執行它

21
00:00:44,000 --> 00:00:45,560
在執行的過程

22
00:00:45,560 --> 00:00:48,759
它其實是同一個對話會不斷的循環

23
00:00:48,759 --> 00:00:50,320
如果是工作流的話

24
00:00:50,320 --> 00:00:52,600
它是流程結束就結束了

25
00:00:52,600 --> 00:00:55,240
像我這邊如果是跟它對話

26
00:00:55,240 --> 00:00:59,399
它會一直保持在相同的Session上面

27
00:00:59,399 --> 00:01:01,880
所以在對話內容跑完以後

28
00:01:01,880 --> 00:01:02,920
它會再繼續

29
00:01:02,920 --> 00:01:03,960
你在問問題的時候

30
00:01:03,960 --> 00:01:05,079
它又從頭繼續跑

31
00:01:05,079 --> 00:01:06,760
我就問它是什麼模型

32
00:01:06,760 --> 00:01:07,959
它又從頭開始

33
00:01:07,959 --> 00:01:11,879
所以它是對話裡面不斷的循環這樣子

34
00:01:11,879 --> 00:01:12,280
OK

35
00:01:12,280 --> 00:01:12,439
好

36
00:01:12,439 --> 00:01:16,359
那這個就是它的聊天流的一個差異

37
00:01:16,359 --> 00:01:17,719
在我們的設計上面

38
00:01:17,719 --> 00:01:20,439
其實因為它要不斷的循環

39
00:01:20,439 --> 00:01:23,560
所以我們有一些資料要把它儲存起來

40
00:01:23,560 --> 00:01:26,840
我們就會在上面會多一個聊天的變數

41
00:01:26,840 --> 00:01:29,599
所以在這邊會多了這個聊天的變數

42
00:01:29,599 --> 00:01:31,079
在這邊對話變數

43
00:01:31,079 --> 00:01:33,519
所以對話變數是可以

44
00:01:33,519 --> 00:01:36,040
幫我們去儲存一些資料在上面的

45
00:01:36,040 --> 00:01:37,680
這個是工作流沒有

46
00:01:37,680 --> 00:01:39,879
因為工作流講完就結束

47
00:01:39,879 --> 00:01:43,400
所以它不需要特別去存對話的變數

48
00:01:43,400 --> 00:01:44,719
這樣對話變數是什麼

49
00:01:44,719 --> 00:01:45,920
我們可以在

50
00:01:45,920 --> 00:01:47,359
譬如說這一輪的對話

51
00:01:47,359 --> 00:01:49,280
我們先把一些東西儲存下來

52
00:01:49,280 --> 00:01:50,760
在下一輪的對話

53
00:01:50,760 --> 00:01:52,840
我們就可以把資料拿出來用

54
00:01:52,840 --> 00:01:55,584
所以這個石頭計畫牽扯到

55
00:01:55,584 --> 00:01:58,079
我們前面講的變數分配器

56
00:01:58,079 --> 00:02:00,069
我們就可以把這個石頭用

57
00:02:00,069 --> 00:02:01,879
變數分配器把它儲存起來

58
00:02:01,879 --> 00:02:03,480
在下一輪的時候

59
00:02:03,480 --> 00:02:05,520
我就可以再從這個變數裡面

60
00:02:05,520 --> 00:02:06,540
直擷取出來使用

61
00:02:06,540 --> 00:02:06,939
OK

62
00:02:06,939 --> 00:02:07,140
好

63
00:02:07,140 --> 00:02:10,800
那我們直接看一個已經設計好的流程

64
00:02:10,800 --> 00:02:13,246
大家可以看一下這個流程

65
00:02:13,246 --> 00:02:16,581
是稍微複雜一點好我們來示範一下

66
00:02:16,581 --> 00:02:19,917
它的作用首先我們在這個瀏覽裡面

67
00:02:19,917 --> 00:02:22,141
我們直接先跟它做個對話

68
00:02:22,141 --> 00:02:23,342
在對話的過程

69
00:02:23,342 --> 00:02:25,342
你看它會走這條路徑

70
00:02:25,342 --> 00:02:26,981
好 在這條路徑

71
00:02:26,981 --> 00:02:28,282
它會去判斷說

72
00:02:28,282 --> 00:02:29,282
我如果沒有詞

73
00:02:29,282 --> 00:02:31,141
它要我輸入一個資料

74
00:02:31,141 --> 00:02:32,842
輸入我的帳號是什麼

75
00:02:32,842 --> 00:02:34,722
在這邊我就打Keyword

76
00:02:34,722 --> 00:02:36,021
然後送出

77
00:02:36,021 --> 00:02:37,081
送出的時候你看

78
00:02:37,081 --> 00:02:39,241
它會形成一個JSON的格式

79
00:02:39,241 --> 00:02:40,342
然後再繼續跑

80
00:02:40,342 --> 00:02:41,701
在第二次跑的時候

81
00:02:41,701 --> 00:02:43,222
他就走上面這一條

82
00:02:43,222 --> 00:02:45,622
因為他把我的資料儲存起來

83
00:02:45,622 --> 00:02:48,262
他發現我有Account

84
00:02:48,262 --> 00:02:49,942
就把這個資料存起來

85
00:02:49,942 --> 00:02:51,461
就走到這邊結束

86
00:02:51,461 --> 00:02:53,861
我在下一次的對話的時候

87
00:02:53,861 --> 00:02:55,381
你看他會在

88
00:02:55,381 --> 00:02:56,502
我再問他說

89
00:02:56,502 --> 00:02:57,062
我是誰

90
00:02:57,062 --> 00:02:58,981
這個時候他就會走另外一條路了

91
00:02:58,981 --> 00:03:00,662
他就會直接說

92
00:03:00,662 --> 00:03:02,342
你看謝謝再聯絡

93
00:03:02,342 --> 00:03:04,021
為什麼

94
00:03:04,021 --> 00:03:05,461
這邊我有做一個判斷

95
00:03:05,461 --> 00:03:08,581
就是當他對話次數超過三次

96
00:03:08,581 --> 00:03:09,541
他就會結束

97
00:03:09,541 --> 00:03:11,342
所以像這個設定

98
00:03:11,342 --> 00:03:12,942
我們有時候可以做一些保護

99
00:03:12,942 --> 00:03:15,741
當聊天就是有客服

100
00:03:15,741 --> 00:03:17,741
就是有人進來抱怨還是幹嘛

101
00:03:17,741 --> 00:03:18,942
但是他想太久

102
00:03:18,942 --> 00:03:22,342
或者是說有時候根本不是要問問題

103
00:03:22,342 --> 00:03:24,942
他可能在那邊跟AI閒聊

104
00:03:24,942 --> 00:03:26,541
這個時候我們就可以去判斷說

105
00:03:26,541 --> 00:03:28,541
他問的次數超過多久

106
00:03:28,541 --> 00:03:30,541
我們就直接把它結束掉

107
00:03:30,541 --> 00:03:32,342
所以在這些地方

108
00:03:32,342 --> 00:03:33,942
我們就可以做一些判斷

109
00:03:33,942 --> 00:03:37,342
然後加一些變數的一些判斷來去決定

110
00:03:37,342 --> 00:03:38,541
要走哪一條路

111
00:03:38,541 --> 00:03:39,701
我們來看一下

112
00:03:39,701 --> 00:03:41,981
像這個流程要怎麼樣的設計

113
00:03:41,981 --> 00:03:44,981
首先我們在第一個分支的時候

114
00:03:44,981 --> 00:03:46,101
第一個分支

115
00:03:46,101 --> 00:03:48,381
其實這邊我們有加一個變數的判斷

116
00:03:48,381 --> 00:03:51,502
就是判斷說我的次數有沒有超過限制

117
00:03:51,502 --> 00:03:52,701
當超過的時候

118
00:03:52,701 --> 00:03:54,301
它就會直接跳出來

119
00:03:54,301 --> 00:03:55,902
所以像這個變數

120
00:03:55,902 --> 00:03:58,981
我們就可以直接從這個系統變數抓出來

121
00:03:58,981 --> 00:04:01,981
所以這個是對話裡面很有用的一個變數

122
00:04:01,981 --> 00:04:04,782
我可以去抓到我聊天的次數

123
00:04:04,782 --> 00:04:05,381
好

124
00:04:05,381 --> 00:04:08,581
再來就是在這邊判斷完的時候

125
00:04:08,581 --> 00:04:10,821
如果超過三次它就走上面

126
00:04:10,821 --> 00:04:12,581
這是我們正常的路徑

127
00:04:12,581 --> 00:04:15,141
下面這個其實就是當超過的時候

128
00:04:15,141 --> 00:04:16,182
我就直接寫

129
00:04:16,182 --> 00:04:17,701
謝謝再聯絡這樣子

130
00:04:17,701 --> 00:04:18,742
OK好

131
00:04:18,742 --> 00:04:20,021
重點是上面這裡

132
00:04:20,021 --> 00:04:22,101
這邊我們會去判斷說

133
00:04:22,101 --> 00:04:25,062
這個Account的變數它有沒有值

134
00:04:25,062 --> 00:04:27,622
Account的變數其實都跟剛才講的一樣

135
00:04:27,622 --> 00:04:30,504
我們在這邊可以去定義不同的變數

136
00:04:30,504 --> 00:04:33,770
所以在定變數的時候我們可以去看一下

137
00:04:33,770 --> 00:04:36,267
說我們後端的系統或者是其他

138
00:04:36,267 --> 00:04:38,188
系統需要哪些變數我們

139
00:04:38,188 --> 00:04:40,303
可以在這邊去把它保留下來

140
00:04:40,303 --> 00:04:43,403
所以有時候我們可以去做一些問訊調查

141
00:04:43,403 --> 00:04:45,923
我們就看它的興趣年紀

142
00:04:45,923 --> 00:04:47,124
它的性別

143
00:04:47,124 --> 00:04:48,223
把這些資料

144
00:04:48,223 --> 00:04:50,024
我們就一個一個把它輸出來

145
00:04:50,024 --> 00:04:51,824
或者是說你們可以建一個

146
00:04:51,824 --> 00:04:53,124
Abiture類型的

147
00:04:53,124 --> 00:04:54,463
那Abiture類型的

148
00:04:54,463 --> 00:04:55,963
我們之後就可以用

149
00:04:55,963 --> 00:04:58,064
JSON的方式做輸出

150
00:04:58,064 --> 00:04:59,983
這個東西有什麼好處

151
00:04:59,983 --> 00:05:02,303
當我們的系統的API

152
00:05:02,303 --> 00:05:03,983
需要輸入什麼變數的時候

153
00:05:03,983 --> 00:05:05,423
我們可以把它打到這邊

154
00:05:05,423 --> 00:05:07,024
到時候我就不用特別整理

155
00:05:07,024 --> 00:05:09,504
它就輸出就是一個節省的資料

156
00:05:09,504 --> 00:05:13,504
這種API的方式是比較適合的

157
00:05:14,143 --> 00:05:16,624
如果我只是針對一個Account要去做輸入

158
00:05:16,624 --> 00:05:19,504
我就直接設定一個String的變數就好

159
00:05:19,504 --> 00:05:21,744
所以我們就用這個來判斷說

160
00:05:21,744 --> 00:05:22,783
如果沒有Account

161
00:05:22,783 --> 00:05:25,903
我就走上面請它去輸入資料

162
00:05:25,903 --> 00:05:27,143
如果已經有了

163
00:05:27,143 --> 00:05:28,663
我就直接顯示出來

164
00:05:28,663 --> 00:05:30,143
這邊會顯示Account

165
00:05:30,143 --> 00:05:33,703
所以這邊我們先把這個數字給它調大一點

166
00:05:33,703 --> 00:05:35,403
我們調個5次好了

167
00:05:35,403 --> 00:05:36,303
這樣

168
00:05:36,303 --> 00:05:37,263
好

169
00:05:37,263 --> 00:05:39,303
在這邊我們就會判斷說

170
00:05:39,303 --> 00:05:40,603
它的Account有的話

171
00:05:40,603 --> 00:05:42,963
我就會直接顯示它的Account是什麼

172
00:05:42,963 --> 00:05:43,504
好

173
00:05:43,504 --> 00:05:44,603
像這個顯示出來

174
00:05:44,603 --> 00:05:46,004
我只是做了示範

175
00:05:46,004 --> 00:05:46,463
好

176
00:05:46,463 --> 00:05:49,064
你們如果要去設計比較複雜的流程

177
00:05:49,064 --> 00:05:51,463
你們可以把相關的資料都打出來

178
00:05:51,463 --> 00:05:52,803
比如說他的帳號

179
00:05:52,803 --> 00:05:54,703
他的性別、年紀

180
00:05:54,703 --> 00:05:58,024
我們最後可能再用這些資料送給後端

181
00:05:58,024 --> 00:06:00,783
讓他去分析問卷調查的資料

182
00:06:00,783 --> 00:06:03,744
還是要去把資料存起來Docker以

183
00:06:03,744 --> 00:06:06,583
這個就看後面要怎麼設計

184
00:06:07,343 --> 00:06:11,384
好 接下來我們在這裡有一個問題分類器

185
00:06:11,384 --> 00:06:12,863
問題分類器在做什麼

186
00:06:12,863 --> 00:06:16,703
我們判斷說它的資料是階層格式還是其他

187
00:06:16,703 --> 00:06:19,744
因為像我們這邊在做輸入的時候

188
00:06:20,103 --> 00:06:22,303
我們直接透過模板

189
00:06:22,303 --> 00:06:25,903
我們直接透過模板來去產生資料

190
00:06:25,903 --> 00:06:28,303
就是讓它去輸入我們的帳號內容

191
00:06:28,303 --> 00:06:31,703
這個其實大家可以去依照這個格式

192
00:06:31,703 --> 00:06:34,103
來去打我們的模板生成

193
00:06:34,103 --> 00:06:37,304
這個東西它其實是一個簡單的HTML

194
00:06:37,304 --> 00:06:38,703
然後它有個表單

195
00:06:38,703 --> 00:06:39,903
然後有個帳號

196
00:06:39,903 --> 00:06:41,169
然後後面會有

197
00:06:41,169 --> 00:06:43,703
一個文字要它去做輸入的動作

198
00:06:43,703 --> 00:06:46,563
按鈕只是去把這個資料做送出

199
00:06:46,563 --> 00:06:49,423
最後它的格子這個是最重要的

200
00:06:49,423 --> 00:06:53,605
它會產生 JSON 的格子讓對話裡面

201
00:06:53,605 --> 00:06:55,586
可以取得像這樣的資料

202
00:06:55,586 --> 00:06:57,346
我們下次送過來

203
00:06:57,346 --> 00:06:59,106
它就會是一個 JSON 的內容

204
00:06:59,106 --> 00:07:01,026
當他發現 JSON 就往上走

205
00:07:01,026 --> 00:07:03,026
我們就有一個工序來去做

206
00:07:03,026 --> 00:07:04,546
JSON 的資料的擷取

207
00:07:04,546 --> 00:07:07,185
所以我們把 JSON 的資料放上面

208
00:07:07,185 --> 00:07:09,505
我把它取的內容是 User Name

209
00:07:09,505 --> 00:07:10,305
這樣子

210
00:07:10,305 --> 00:07:12,625
我就可以把 User Name的資料抓出來

211
00:07:12,625 --> 00:07:15,106
重點是這一個分配器

212
00:07:15,106 --> 00:07:17,346
我們的變數分配器就是要把

213
00:07:17,346 --> 00:07:18,906
account的資料測成什麼

214
00:07:18,906 --> 00:07:21,185
就是從前面這邊

215
00:07:21,185 --> 00:07:23,146
JSON的資料 擷取的內容

216
00:07:23,146 --> 00:07:24,426
把它放進來

217
00:07:24,426 --> 00:07:27,065
這樣子我們就可以拿到我們的Uterlai n

218
00:07:27,065 --> 00:07:28,786
那下一次

219
00:07:28,786 --> 00:07:30,466
下一次在走的時候

220
00:07:30,466 --> 00:07:31,266
它就走下面

221
00:07:31,266 --> 00:07:33,706
然後把Uterlain呈現出來

222
00:07:33,706 --> 00:07:35,505
所以像我們的結果

223
00:07:35,505 --> 00:07:36,386
大概就是

224
00:07:36,386 --> 00:07:37,266
再做一次

225
00:07:37,266 --> 00:07:39,146
像我這邊再跟它問個問題

226
00:07:39,146 --> 00:07:40,426
所以第一次走上面

227
00:07:40,426 --> 00:07:41,625
因為我沒有值

228
00:07:41,625 --> 00:07:43,225
那它就要我去輸入

229
00:07:43,225 --> 00:07:45,225
這個時候我就打我的名字

230
00:07:45,225 --> 00:07:47,225
打名字送出

231
00:07:47,225 --> 00:07:49,225
第二次他就送出JSON的內容

232
00:07:49,225 --> 00:07:51,225
他把JSON的內容送出

233
00:07:51,225 --> 00:07:53,225
我們會把這個account抓出來

234
00:07:53,225 --> 00:07:55,225
因為我送給他這個資料

235
00:07:55,225 --> 00:07:57,225
他發現是JSON

236
00:07:57,225 --> 00:07:59,225
所以他就把JSON擷取出來

237
00:07:59,225 --> 00:08:01,225
然後把它存起來

238
00:08:01,225 --> 00:08:03,225
把這個資料存起來

239
00:08:03,225 --> 00:08:05,225
所以他把Uter name抓出來了以後

240
00:08:05,225 --> 00:08:07,225
接下來我再問他

241
00:08:07,225 --> 00:08:09,225
我是誰 他就會直閱輸出我的account

242
00:08:09,225 --> 00:08:11,225
他就往下走了

243
00:08:11,225 --> 00:08:11,865
到這邊

244
00:08:11,865 --> 00:08:13,466
因為我的耳炕有值了

245
00:08:13,466 --> 00:08:14,386
所以它就往下

246
00:08:14,386 --> 00:08:17,146
所以它就直接輸入我的耳炕是什麼

247
00:08:17,146 --> 00:08:19,505
所以它像這樣子走的話

248
00:08:19,505 --> 00:08:20,505
它其實就會

249
00:08:20,505 --> 00:08:24,065
就是我們就可以用這個變數來去判斷說

250
00:08:24,065 --> 00:08:26,625
目前的資料是存不存在

251
00:08:26,625 --> 00:08:28,586
然後這個變數有沒有存在

252
00:08:28,586 --> 00:08:31,225
有的話它就會直接看要走到哪裡去

253
00:08:31,225 --> 00:08:32,186
流程上面

254
00:08:32,186 --> 00:08:33,306
我如果要儲蓄

255
00:08:33,306 --> 00:08:34,546
還有一個很好的功能

256
00:08:34,546 --> 00:08:37,105
它這邊有一個快儲變數

257
00:08:37,105 --> 00:08:40,466
我們可以看一下說這個變數目前是什麼值

258
00:08:40,466 --> 00:08:41,625
所以像我前面

259
00:08:41,625 --> 00:08:43,426
我這邊有個Account變數

260
00:08:43,426 --> 00:08:44,426
我就可以看到說

261
00:08:44,426 --> 00:08:46,105
這個Account現在是什麼內容

262
00:08:46,105 --> 00:08:48,505
還有這個被劃次數

263
00:08:48,505 --> 00:08:50,025
目前第三次

264
00:08:50,025 --> 00:08:52,625
所以我就可以用這些資料來去追蹤

265
00:08:52,625 --> 00:08:54,625
我目前的進度到哪裡

266
00:08:54,625 --> 00:08:57,025
就是這些變數相關的值是什麼

267
00:08:57,025 --> 00:08:58,826
我們就可以透過這個功能

268
00:08:58,826 --> 00:09:00,505
來去簡單的查詢

269
00:09:00,505 --> 00:09:02,306
我現在變數的資料是什麼

270
00:09:02,306 --> 00:09:04,426
那也可以幫助我們去追蹤

271
00:09:04,426 --> 00:09:06,466
就是流程上的一些參數這樣子
